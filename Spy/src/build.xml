<!--
Project directory structure:
  build.xml : this file
  .gitignore: git ignore files for Java (EECS 293 version).
              This is a hidden file, but do not ignore!
  src/ : source .java files

Generated directories
  build/ : .class files
  report/
    junit/index.html : JUnit report
  doc/ : JavaDoc

$ANT_HOME/lib must contain (see Ant-JUnit and JaCoCo installation guides):
  ant-junit4.jar
  ant-junit.jar
  hamcrest-core-1.3.jar
  junit-4.12.jar
  jacocoant.jar
-->

<project name="src" >

    <!--   Directory with source files -->
    <property name="src.dir" value="src"/>

    <!--   Directories with the class files -->
    <property name="build.dir" value="build"/>

    <!--   Directories and files with the reports on unit test and code coverage -->
    <property name="report.dir" value="report"/>
    <property name="junit.dir" value="${report.dir}/junit"/>
    <taskdef uri="antlib:org.jacoco.ant" resource="org/jacoco/ant/antlib.xml">
	  <classpath path="${ant.home}/lib/jacocoant.jar"/>
     </taskdef>


    <!--   Additional jar that may be needed for properly running junit -->
    <path id="hamcrest.classpath">
        <pathelement location="${ant.home}/lib/hamcrest-core-1.3.jar"/>
    </path>

    <!--   ant clean : remove generated files -->
    <target name="clean">
        <delete dir="${build.dir}"/>
        <delete dir="${report.dir}"/>
    </target>

    <!--   ant build : compile the src  -->
    <target name="build">
        <mkdir dir="${build.dir}"/>
        <javac srcdir="${src.dir}" destdir="${build.dir}" debug="true" includeAntRuntime="yes"/>
    </target>

    <!--   ant test : run unit tests -->
    <target name="test" depends="build">
        <mkdir dir="${report.dir}"/>
        <mkdir dir="${junit.dir}"/>
    </target>

    <!--   ant report : generate the JUnit and code coverage reports  -->
    <target name="report" depends="test">
        <junitreport todir="${junit.dir}">
            <fileset dir="${junit.dir}" includes="TEST-*.xml"/>
            <report todir="${junit.dir}"/>
        </junitreport>
    </target>
</project>
